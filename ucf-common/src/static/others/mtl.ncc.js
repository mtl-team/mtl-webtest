!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";let e={};const t={default_tp:"none",time_out:5e3,header:{}};function i(t,i){if(t&&"string"==typeof t){const n=e[t];return n?i&&i({code:0,msg:"success",result:n}):i&&i({code:1,msg:"不存在此配置",result:n}),n}return i&&i({code:1,msg:"appId不能为空，或者不是string",result:null}),null}var n={appcontext:{token:"",devid:"DUPNW17610001718865360039302957",userid:"",massotoken:"",appid:"sso",funcid:"",groupid:"",sessionid:"",user:"",tabid:"",pass:""},servicecontext:{callback:"nothing",actionid:"umCommonService",params:{user:"a",pass:"a111111"},actionname:"load",viewid:"com.yonyou.ma.controller.CustomerController",controllerid:"com.yonyou.ma.controller.CustomerController"},deviceinfo:{os:"web",style:"web",isroot:!1,versionname:"3.6.2",devid:"DUPNW17610001718865360039302957",name:"PRA-AL00X",ssid:"yumhf_wifi",appversion:"4",mac:"c4:86:e9:7c:86:f0",uuid:"",wfaddress:"c4:86:e9:7c:86:f0",osversion:"8.0.0",lang:"zh",ncdevid:"865360039302957"},serviceid:"UMSSOGetApps"};const o=require("axios"),a="/umserver/SSOLogin";function c(e){if(!e)return;const{appId:t}=e,c=i(t);if(!c)return;const{host:r="",port:s="",isHttps:l=!1,default_tp:d,time_out:f,header:p}=c,{tp:u=d,viewId:m="",action:g="",serviceId:v,timeout:C=f,params:h={},header:y=p}=e;let w={deviceinfo:{...n.deviceinfo},appcontext:{...n.appcontext,appid:t},serviceid:v||n.serviceid,servicecontext:{...n.servicecontext,params:h,appid:t,viewid:m,actionname:g}};const S=(r?`${l?"https://":"http://"}${r}${s}`:"")+a,b=new FormData;return b.append("tp",u),b.append("data",JSON.stringify(w)),new Promise((t,i)=>{o({timeout:C,method:"POST",url:S,data:b,headers:{"Content-Type":"application/json",...y}}).then(function(i){e.callback&&e.callback(i.data),t(i.data)}).catch(function(t){e.callback&&e.callback(t),i(t)})})}let r=[{api:"callAction",fn:c},{api:"callService",fn:function(e){if(e)return c({...e})}},{api:"writeUCGConfig",fn:function(i,n,o){i&&"string"==typeof i?(e[i]={...t,...n,appId:i},o&&o({code:0,msg:"success",result:n})):o&&o({code:1,msg:"appId不能为空，或者不是string",result:null})}},{api:"readUCGConfig",fn:i}],s=[{api:"writeUCGConfig",fn:function(e){mtlBridge.call("ucg.writeUCGConfig",JSON.stringify(e),e.callback)}},{api:"readUCGConfig",fn:function(e){mtlBridge.call("ucg.readUCGConfig",JSON.stringify(e),e.callback)}},{api:"callAction",fn:function(e){mtlBridge.call("ucg.callService",JSON.stringify(e),e.callback)}}];!function(){if(!mtl)throw Error("mtl is undefine!");let e=[];e="ios"==mtl.platform||"android"==mtl.platform?s:r;for(let t of e)mtl.register(t)}()});
